{% extends 'cheap_pints/base.html' %}
{% load staticfiles %}

{% block title_block %}
Home
{% endblock %}

{% block body_block %}

<div class="jumbotron p-4">
    <div class="container">
        <div>
            <h2 class="h2">
                {{ bar.barName }}
            </h2>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12">
           <div class="card-columns">
                <div class="card">
                     <img class="card-img-top"
                        {% if bar.image_reference %}
                        src="https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference={{ bar.image_reference }}&key={{ api_key }}"
                        {% else %}
                        src="https://cdn.pixabay.com/photo/2017/05/05/19/33/beer-2288121_1280.jpg"
                        {% endif %}>
                        </img> 
                    <div class="card-body">
                    </div>
                </div>
                <div class="card">
                    <div id="googleMap" style="width:100%;height:400px;"></div>
                    <div class="card-body">
                        <h4 class="card-title">Title</h4>
                        <p class="card-text">Text</p>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    <script>
      // This sample uses the Place Autocomplete widget to allow the user to search
      // for and select a place. The sample then displays an info window containing
      // the place ID and other information about the place that the user has
      // selected.

      // This example requires the Places library. Include the libraries=places
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

function initMap() {
        var map = new google.maps.Map(document.getElementById('googleMap'), {
        center: new google.maps.LatLng(0, 0),
        zoom: 15
    });
        var service = new google.maps.places.PlacesService(map);

        service.getDetails({
        placeId: '{{ bar.googleId }}'
    }, function (place, status) {
        if (status === google.maps.places.PlacesServiceStatus.OK) {

            // Create marker
            var marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location
            });

            // Center map on place location
            map.setCenter(place.geometry.location);
            alert(place)
            }
        }
      )}
    
</script>

<script src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&libraries=places&callback=initMap"
        async defer></script>

{% endblock %}